import { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from 'standardized-audio-context/src/interfaces/index';
import { cloneAudioWorkletNodeOptions } from 'standardized-audio-context/src/helpers/clone-audio-worklet-node-options';

export const createAudioWorkletProcessorPromise = async (
    processorConstructor: IAudioWorkletProcessorConstructor,
    audioWorkletNodeOptions: IAudioWorkletNodeOptions
): Promise<IAudioWorkletProcessor> => {
    const clonedAudioWorkletNodeOptions = await cloneAudioWorkletNodeOptions(audioWorkletNodeOptions);

    return new processorConstructor(clonedAudioWorkletNodeOptions);
};
