import { createInvalidAccessError } from 'standardized-audio-context/src/factories/invalid-access-error';
import { TNativeIIRFilterNode } from 'standardized-audio-context/src/types/index';

export const wrapIIRFilterNodeGetFrequencyResponseMethod = (nativeIIRFilterNode: TNativeIIRFilterNode): void => {
    nativeIIRFilterNode.getFrequencyResponse = ((getFrequencyResponse) => {
        return (frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array) => {
            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {
                throw createInvalidAccessError();
            }

            return getFrequencyResponse.call(nativeIIRFilterNode, frequencyHz, magResponse, phaseResponse);
        };
    })(nativeIIRFilterNode.getFrequencyResponse);
};
